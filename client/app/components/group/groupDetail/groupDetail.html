<md-toolbar class="md-hue-1" ng-hide="$ctrl.editEnabled">
  <div class="md-toolbar-tools">
    <h1 flex>
      <i class="fa fa-home" aria-hidden="true"></i>&nbsp;
      {{$ctrl.groupData.name}}
    </h1>
    <span>
      <md-button class="md-icon-button" ng-click="$ctrl.editEnable()"
                 aria-label="{{ 'GROUP.EDIT' | translate }}">
        <md-tooltip md-direction="left">
          <span translate="GROUP.EDIT"></span>
        </md-tooltip>
        <i class="fa fa-pencil"></i>
      </md-button>
      <md-button class="md-icon-button" ng-click="$ctrl.leaveGroup()"
                 aria-label="{{ 'GROUP.LEAVE' | translate }}">
        <md-tooltip md-direction="left">
          <span translate="GROUP.LEAVE"></span>
        </md-tooltip>
        <i class="fa fa-fw fa-sign-out"></i>
      </md-button>
    </span>
  </div>
</md-toolbar>

<md-content layout-padding ng-hide="$ctrl.editEnabled">
  <div ng-if="$ctrl.$mdMedia('gt-sm')" editable-textarea="$ctrl.groupData.description">
    <expandable-panel content="$ctrl.groupData.description" markdown="true" collapse="10"></expandable-panel>
  </div>
  <md-content class="md-padding">
    <md-nav-bar md-selected-nav-item="$ctrl.currentNavItem" nav-bar-aria-label="navigation links">
      <md-nav-item md-nav-sref="group.groupDetail.pickups" name="pickups">
        <span translate="GROUP.PICKUPS"></span>
      </md-nav-item>
      <md-nav-item ng-if="!$ctrl.$mdMedia('gt-sm')" md-nav-sref="group.groupDetail.stores" name="stores">
        <span translate="GROUP.STORES"></span>
      </md-nav-item>
      <md-nav-item ng-if="!$ctrl.$mdMedia('gt-sm')" md-nav-sref="group.groupDetail.description" name="description">
        <span translate="GROUP.DESCRIPTION"></span>
      </md-nav-item>
      <md-nav-item md-nav-sref="group.groupDetail.members" name="members">
        <span translate="GROUP.MEMBERS"></span> ({{$ctrl.groupData.members.length}})
      </md-nav-item>
    </md-nav-bar>

    <ui-view></ui-view>
  </md-content>
</md-content>

<form ng-if="$ctrl.editEnabled" name="editForm" ng-submit="editForm.$valid && $ctrl.submitEdit()">
  <md-toolbar class="md-hue-1">
    <div class="md-toolbar-tools">
      <h1 flex>
        <i class="fa fa-pencil" aria-hidden="true"></i>&nbsp;
        <span translate="GROUP.EDIT"></span>
      </h1>
    </div>
  </md-toolbar>
  <div layout-padding layout="column">
    <md-input-container>
      <label translate="GROUP.TITLE"></label>
      <input required type="text" ng-model="$ctrl.editData.name"/>
    </md-input-container>

    <md-input-container>
      <label translate="GROUP.DESCRIPTION"></label>
      <textarea ng-model="$ctrl.editData.description"></textarea>
    </md-input-container>

    <md-input-container>
      <label translate="GROUP.PUBLIC_DESCRIPTION"></label>
      <textarea ng-model="$ctrl.editData.public_description"></textarea>
    </md-input-container>

    <md-input-container>
      <label translate="GROUP.PASSWORD"></label>
      <input type="text" ng-model="$ctrl.editData.password"/>
    </md-input-container>

    <p>{{ $ctrl.error }}</p>
    <div layout="row" layout-align="end start">
      <md-button class="md-icon-button" ng-click="$ctrl.stopEdit()">
        <i class="fa fa-times"></i>
      </md-button>
      <md-button type="submit" class="md-raised md-primary" ng-disabled="!editForm.$valid || $ctrl.saving">
        <i class="fa fa-check"></i>
      </md-button>
    </div>
  </div>
</form>
